"use strict";(self.webpackChunkzhenglong_docs=self.webpackChunkzhenglong_docs||[]).push([[624],{8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(6540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}},9362:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"api","title":"API Reference","description":"This document provides detailed information about the Zhenglong Protocol\'s smart contract interfaces and functions.","source":"@site/docs/api.md","sourceDirName":".","slug":"/api","permalink":"/api","draft":false,"unlisted":false,"editUrl":"https://github.com/zhenglong-protocol/docs/tree/main/docs/api.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"STEAM Token","permalink":"/steam-token"},"next":{"title":"Frequently Asked Questions","permalink":"/faq"}}');var r=t(4848),s=t(8453);const a={sidebar_position:5},o="API Reference",l={},c=[{value:"Contract Addresses",id:"contract-addresses",level:2},{value:"Core Interfaces",id:"core-interfaces",level:2},{value:"Minter Contract",id:"minter-contract",level:3},{value:"Stability Pool Contract",id:"stability-pool-contract",level:3},{value:"Price Oracle Contract",id:"price-oracle-contract",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Reading Market Data",id:"reading-market-data",level:3},{value:"Interacting with Stability Pools",id:"interacting-with-stability-pools",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Event Indexing",id:"event-indexing",level:2},{value:"Stability Pool Events",id:"stability-pool-events",level:3},{value:"Market Events",id:"market-events",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Support",id:"support",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,r.jsx)(n.p,{children:"This document provides detailed information about the Zhenglong Protocol's smart contract interfaces and functions."}),"\n",(0,r.jsx)(n.h2,{id:"contract-addresses",children:"Contract Addresses"}),"\n",(0,r.jsx)(n.admonition,{title:"Coming Soon",type:"note",children:(0,r.jsx)(n.p,{children:"Contract addresses will be published here upon mainnet deployment. The protocol is currently in development and testing phase."})}),"\n",(0,r.jsx)(n.h2,{id:"core-interfaces",children:"Core Interfaces"}),"\n",(0,r.jsx)(n.h3,{id:"minter-contract",children:"Minter Contract"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"interface IMinter {\n  // View Functions\n  function collateralTokenBalance() external view returns (uint256);\n  function totalCollateralValue() external view returns (uint256);\n  function totalPeggedValue() external view returns (uint256);\n  function totalLeveragedValue() external view returns (uint256);\n  function collateralRatio() external view returns (uint256);\n\n  // Events\n  event LeveragedTokenMinted(\n    address indexed user,\n    uint256 collateralAmount,\n    uint256 tokenAmount,\n    uint256 timestamp\n  );\n  event LeveragedTokenRedeemed(\n    address indexed user,\n    uint256 tokenAmount,\n    uint256 collateralAmount,\n    uint256 timestamp\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"stability-pool-contract",children:"Stability Pool Contract"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"interface IStabilityPool {\n  // View Functions\n  function getDepositAmount(address user) external view returns (uint256);\n  function getRewards(address user) external view returns (uint256);\n  function getAPR() external view returns (uint256);\n\n  // State-Changing Functions\n  function deposit(uint256 amount) external;\n  function withdraw(uint256 amount) external;\n  function claimRewards() external;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"price-oracle-contract",children:"Price Oracle Contract"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"interface IPriceOracle {\n  // View Functions\n  function getPrice(address token) external view returns (uint256);\n  function getRoundData(uint80 roundId) external view returns (\n    uint80 roundId,\n    int256 answer,\n    uint256 startedAt,\n    uint256 updatedAt,\n    uint80 answeredInRound\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,r.jsx)(n.admonition,{title:"Examples Only",type:"note",children:(0,r.jsx)(n.p,{children:"The following examples use placeholder addresses and are provided for illustration purposes only. Replace with actual contract addresses once the protocol is deployed to mainnet."})}),"\n",(0,r.jsx)(n.h3,{id:"reading-market-data",children:"Reading Market Data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { ethers } from "ethers";\nimport { markets } from "@zhenglong/config";\n\nconst provider = new ethers.providers.Web3Provider(window.ethereum);\nconst market = markets["steth-usd"];\n\n// Get collateral ratio\nconst minter = new ethers.Contract(\n  "0x1234567890123456789012345678901234567890", // Replace with actual minter address after deployment\n  minterABI,\n  provider\n);\nconst collateralRatio = await minter.collateralRatio();\n\n// Get current price\nconst priceOracle = new ethers.Contract(\n  "0x1234567890123456789012345678901234567890", // Replace with actual oracle address after deployment\n  priceOracleABI,\n  provider\n);\nconst price = await priceOracle.getPrice(\n  "0x1234567890123456789012345678901234567890"\n); // Replace with token address\n'})}),"\n",(0,r.jsx)(n.h3,{id:"interacting-with-stability-pools",children:"Interacting with Stability Pools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Deposit into stability pool\nconst stabilityPool = new ethers.Contract(\n  "0x1234567890123456789012345678901234567890", // Replace with actual stability pool address after deployment\n  stabilityPoolABI,\n  signer\n);\nawait stabilityPool.deposit(ethers.utils.parseEther("1.0"));\n\n// Claim rewards\nawait stabilityPool.claimRewards();\n'})}),"\n",(0,r.jsx)(n.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"enum RebalancePoolError {\n  ErrorWrapperSrcMismatch,\n  ErrorWrapperDstMismatch,\n  DepositZeroAmount,\n  DepositAmountLessThanMinimum,\n  WithdrawZeroAmount,\n  WithdrawAmountExceedsBalance,\n  collateralRatioTooHigh,\n  NotEnoughTokensToLiquidate,\n  InvalidLiquidationToken,\n  ErrorSelfSharingIsNotAllowed,\n  ErrorCascadedSharingIsNotAllowed,\n  ErrorVoteShareNotAllowed,\n  ErrorNoAcceptedSharedVote,\n  ErrorVoteOwnerCannotStake,\n  ErrorRepeatAcceptSharedVote,\n  RewardClaimFailed\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"event-indexing",children:"Event Indexing"}),"\n",(0,r.jsx)(n.h3,{id:"stability-pool-events",children:"Stability Pool Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event Deposit(\n  address indexed user,\n  uint256 amount,\n  uint256 timestamp\n);\n\nevent Withdraw(\n  address indexed user,\n  uint256 amount,\n  uint256 timestamp\n);\n\nevent RewardsClaimed(\n  address indexed user,\n  uint256 amount,\n  uint256 timestamp\n);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"market-events",children:"Market Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event PriceUpdated(\n  address indexed token,\n  uint256 price,\n  uint256 timestamp\n);\n\nevent CollateralRatioUpdated(\n  uint256 oldRatio,\n  uint256 newRatio,\n  uint256 timestamp\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always check return values"}),"\n",(0,r.jsx)(n.li,{children:"Handle revert cases"}),"\n",(0,r.jsx)(n.li,{children:"Implement proper error messages"}),"\n",(0,r.jsx)(n.li,{children:"Use try-catch blocks"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gas Optimization"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Batch transactions when possible"}),"\n",(0,r.jsx)(n.li,{children:"Use view functions for reading data"}),"\n",(0,r.jsx)(n.li,{children:"Optimize storage access"}),"\n",(0,r.jsx)(n.li,{children:"Consider gas costs"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validate all inputs"}),"\n",(0,r.jsx)(n.li,{children:"Check access controls"}),"\n",(0,r.jsx)(n.li,{children:"Implement proper checks"}),"\n",(0,r.jsx)(n.li,{children:"Use safe math operations"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Testing"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Write unit tests"}),"\n",(0,r.jsx)(n.li,{children:"Test edge cases"}),"\n",(0,r.jsx)(n.li,{children:"Implement integration tests"}),"\n",(0,r.jsx)(n.li,{children:"Use test networks"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,r.jsx)(n.p,{children:"Need help with the API?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Join our ",(0,r.jsx)(n.a,{href:"https://discord.gg/zhenglong",children:"Discord"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);